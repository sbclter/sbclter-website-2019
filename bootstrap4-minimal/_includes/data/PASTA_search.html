<!-- copy of pasta_search.html from April 2020 -->
<!-- 
<div id="search-url-section">
   <div class="label"> Save Search Link: </div>
   <input type="text" class="text form-control">
</div>
-->

<form id="dataSearchForm" name="dataSearchForm">
   <div class="row">
      <div class="col-md-4">
      <input type="hidden" id="sort" name="sort" value="score"/>
      <input class="search-input" id="search_term" name="q" placeholder="Enter search term" type="text"/>
       <!-- <input type="submit" value="Search"/> -->
     <!--  <p class="small">With no search terms, all SBC LTER datasets are listed.</p> -->
   </div>
      <div class="col-md-4">
         <p class="small">To search anywhere in the dataset, enter a term. Use quotes for an exact phrase ("kelp forest"), and a minus sign to exclude
            terms (cruise -nitrate), as for other search engines. </p>
      </div>
      <!-- Identifier (DOI or local-ID) (not a filter, so put near the top) -->
      <div class="col-md-4">
         <div class="input-block">
            <i class="fas fa-bullseye"></i><label class="group-label" for="identifier">Identifier</label>
            <input class="search-input" name="id" id="identifier" placeholder="DOI or ID" type="text" title="Find a dataset if you have its DOI or ID"/>
         </div>
      </div>
   </div>
   
   
  
   
   
   <div class="">
<!--    <div style="margin-top: 10px"> -->
      <input aria-expanded="false" aria-controls="advancedInputs" class="collapse-toggle" name="expanded" type="checkbox"
         value="true" id="advancedToggle" role="button"/>
      <!-- <label class="lbl-toggle" tabindex="0" for="advancedToggle">
         Advanced
      </label> -->
      <p class="small">Refine or filter
         the search above by <strong>Creator</strong> and/or <strong>Year</strong>. </p>
   </div>


<!--    <div class="collapsible" id="advancedInputs"> -->
   <div class="" id="advancedInputs">
      
      <div class="row">
         <!-- Creator -->
         <div class="col-md-4">
      <div class="input-block">
         <i class="fas fa-user"></i><label class="group-label" for="creator">Creator</label>
         <input class="search-input" name="creator" id="creator" placeholder="Name" type="text" title="The name of the creator or originator of a dataset"/>
      </div>
         </div>
      
      <!-- Dates -->
         <div class="col-md-4">
      <div class="input-block">
         <i class="fas fa-calendar-alt"></i><span class="group-label">Year</span>
         <br/>
         <div class="yeardiv">
            <label for="min_year">Start</label>
            <br/>
            <input class="yearbox" id="min_year" name="s" value="1955" type="number"/>
         </div>
         <div class="yeardiv">
            <label for="max_year">End</label>
            <br/>
            <input class="yearbox" id="max_year" name="e" value="2019" type="number"/>
         </div>
         <div class="daterangetype">
            <input id="data_year" name="datayear" value="y" type="checkbox" title="Only show results with data collected within the year range">
            <label class="form-check-label" for="data_year"> Data coverage </label><br/>
            <input id="publish_year" name="pubyear" value="y" type="checkbox" title="Only show results that were published within the year range"/>
            <label class="form-check-label" for="publish_year"> Publish year </label>
         </div>
      </div>
         </div>
      
      <!-- Location 
         <div class="col-md-3">
      <div class="input-block">
         <i class="fas fa-globe"></i><label class="group-label" for="geo">Location</label>
         <input class="search-input" name="geo" id="geo" placeholder="Sampling Site" type="text" title="The geographic area or site described"/>
      </div>
         </div>
-->      


      <!-- Taxon 
         <div class="col-md-2">
      <div class="input-block">
         <i class="fas fa-sitemap"></i><label class="group-label" for="taxon">Taxon</label>
         <input class="search-input" name="taxon" id="taxon" placeholder="Class name, family name, etc." type="text"
            title="Taxonomic name provided by the data submitter">
      </div>
         </div>
      -->
  
      
      
         <div class="col-md-4">
          <!-- CRA -->
           <!--  
      <div class="input-block">
         <i class="fas fa-leaf"></i>
         <label class="group-label" for="coreArea">LTER Core Area</label>
         <br>
         <select class="search-input" name="coreArea" id="coreArea">
            <option value="any">Any</option>
            <option value="primary production">Primary Production</option>
            <option value="organic matter">Organic Matter</option>
            <option value="disturbance">Disturbance</option>
            <option value="inorganic nutrients">Inorganic Nutrients</option>
            <option value="populations">Populations</option>
         </select>
      </div>
            -->
            
            <!-- link to browse page  -->
            <table class="table-borderless" style="">		
               <tbody>
                  <tr class="row">		
                     <td class="cell col">
                        <strong><h3>OR</h3></strong>					
                     </td>					
                  </tr>
                  <tr class="row">		
                     <td class="cell col">
                        <strong><a href="{{site.baseurl}}/data/catalog">Browse datasets in collections by biome, meaurement type or research area</a></strong>
                     </td>					
                  </tr>
               </tbody>
            </table>
            
            
         </div>
         
      </div>     
    
      <!-- submit! -->
      <input type="submit" value="Search" id="advanced">
      <input type="button" onclick="clearParams()" value="Clear Search Parameters"> 
      <hr/>

   </div>
   
   
   
</form>

<div class="loading" id="loading-div">
   <i class="fas fa-spinner fa-pulse fa-3x fa-fw"></i>
   <span class="sr-only">Loading...</span>
</div>


<h2>Search Results</h2>
<div class="row">
   <div class="col-md-6">
      <p>With no search parameters, all SBC LTER datasets are listed.</p>
   </div>
   <div class="col-md-6">
     <div id="search-url-section">
        <div class="label"> Save this search: </div>
       <input type="text" class="text form-control">
     </div>
   </div>
</div>

<div class="resultCount" id="resultCount"></div>

<div class="pagination" id="paginationTop"></div>
<div style="display:none" id="sortDiv">
   <label for="visibleSort">Sort by</label>
   <select name="sort" id="visibleSort">
      <option value="score">Relevance</option>
      <option value="pubdate">Most recently published</option>
      <option value="enddate">Most recent data</option>
      <option value="titles">Title (a-z)</option>
      <option value="responsibleParties">Creator (a-z)</option>
   </select>
</div>
<div id="searchResults"></div>
<div class="pagination" id="paginationBot"></div>


<hr/>
<p class="h3">For Data Managers: </p>

<div id="csvDownload"></div>
<p>Save this search's resultset as a table (columns = dataset title, creators, publication year, DOI, original packageID) </p>

<p>Search URL (format = SOLR) </p>
<p id="searchUrl"></p>


<!-- TO DO: someday, create a save-query link that goes to this page with the resultset, and can be shared -->

